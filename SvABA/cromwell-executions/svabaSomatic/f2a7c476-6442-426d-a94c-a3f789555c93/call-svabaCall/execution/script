#!/bin/bash
tmpDir=$(mktemp -d /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/execution/tmp.XXXXXX)
chmod 777 $tmpDir
export _JAVA_OPTIONS=-Djava.io.tmpdir=$tmpDir
export TMPDIR=$tmpDir

(
cd /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/execution
svaba run -p 4 -t /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/inputs/Users/dawsonet/sandbox/firecloud-tools/SvABA/../delly/alt.sorted.bam -n /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/inputs/Users/dawsonet/sandbox/firecloud-tools/SvABA/../delly/ref.sorted.bam --hp -G /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/inputs/Users/dawsonet/sandbox/firecloud-tools/SvABA/../delly/mega.orig.fa -k /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/inputs/Users/dawsonet/sandbox/firecloud-tools/SvABA/reg.bed -a sample
)
echo $? > /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/execution/rc.tmp
(
cd /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/execution

)
sync
mv /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/execution/rc.tmp /cromwell-executions/svabaSomatic/f2a7c476-6442-426d-a94c-a3f789555c93/call-svabaCall/execution/rc
